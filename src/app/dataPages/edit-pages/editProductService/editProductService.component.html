<div class="row">
  <div class="col-sm-5">
    <app-breadcrumbs [steps]="breadcrumbs"></app-breadcrumbs>
  </div>
  <div class="col-sm-5 mt-3">
    <h3>
      <b> {{paramId | titlecase}}
      </b>
    </h3>
  </div>
</div>
<section id="icon-tabs">
  <div class="row">
    <div class="col-12">
      <div class="card text-center">
        <div class="card-body">
          <div class="card-block">
            <form class="icons-tab-steps wizard-circle" id="form" [formGroup]="form" novalidate class="mt-3">
              <div class="centered-content" style="margin-top:6%; width: 85%;">
                <div class="row">
                  <div class="col-md-5  offset-md-1  col-sm-12">
                    <div class="form-group">
                      <label class="text-left" for="prsr">
                        Select Product/Service
                        <span class="danger">*</span>
                      </label>
                      <ng-select [items]="autoFillPrsrName" placeholder="Select to edit" formControlName="selectedPrsrName" (change)="autoFillData($event)">
                      </ng-select>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-5 col-sm-5  offset-sm-4 offset-md-1">
                    <div class="form-group">
                      <label>Name of product/Service</label>
                      <span class="danger">*</span>
                      <input type="text" class="form-control" formControlName="prsrName">
                      <small class="text-muted">eg.
                        <i>Butter</i>
                      </small>

                      <div [ngClass]="{'error': form.controls['prsrName'].errors && !form.controls['prsrName'].pristine}">
                        <div *ngIf="form.controls['prsrName'].errors && !form.controls['prsrName'].pristine" class="error-msg">
                          <small class="form-text text-muted danger" [hidden]="!form.controls['prsrName'].errors.required">Field is required.</small>
                          <small class="form-text text-muted danger" [hidden]="!form.controls['prsrName'].errors.patternInvalid">Invalid field.</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5   col-sm-5  offset-sm-4 offset-md-1">
                    <div class="form-group">
                      <label>Type</label>
                      <span class="danger">*</span>
                      <select class="form-control" formControlName="type">
                        <option value=" goods" selected> Goods</option>
                        <option value="services">Services</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>

                    <div [ngClass]="{'error': form.controls['type'].errors && !form.controls['type'].pristine}">
                      <div *ngIf="form.controls['type'].errors && !form.controls['type'].pristine" class="error-msg">
                        <small class="form-text text-muted danger" [hidden]="!form.controls['type'].errors.required">Field is required.</small>
                        <small class="form-text text-muted danger" [hidden]="!form.controls['type'].errors.patternInvalid">Invalid field.</small>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5   col-sm-5  offset-sm-4 offset-md-1">
                    <div class="form-group">
                      <label>Units</label>
                      <span class="danger">*</span>
                      <ng-select [items]="items" formControlName="units" placeholder="No city selected">
                      </ng-select>

                      <div [ngClass]="{'error': form.controls['units'].errors && !form.controls['units'].pristine}">
                        <div *ngIf="form.controls['units'].errors && !form.controls['units'].pristine" class="error-msg">
                          <small class="form-text text-muted danger" [hidden]="!form.controls['units'].errors.required">Field is required.</small>
                          <small class="form-text text-muted danger" [hidden]="!form.controls['units'].errors.patternInvalid">Invalid field.</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5   col-sm-5  offset-sm-4 offset-md-1">
                    <div class="form-group">
                      <span class="danger">*</span>
                      <label>Product/Service Rate</label>
                      <input type="text" class="form-control" formControlName="prsrRate">

                      <div [ngClass]="{'error': form.controls['prsrRate'].errors && !form.controls['prsrRate'].pristine}">
                        <div *ngIf="form.controls['prsrRate'].errors && !form.controls['prsrRate'].pristine" class="error-msg">
                          <small class="form-text text-muted danger" [hidden]="!form.controls['prsrRate'].errors.required">Field is required.</small>
                          <small class="form-text text-muted danger" [hidden]="!form.controls['prsrRate'].errors.patternInvalid">Invalid field.</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5   col-sm-5  offset-sm-4 offset-md-1">
                    <div class="form-group">
                      <label>Gst rate</label>
                      <span class="danger">*</span>
                      <select class="form-control" formControlName="gstRate">
                        <option value="0" selected> 0</option>
                        <option value="0.25">0.25</option>
                        <option value="3">3</option>
                        <option value="5" selected> 5</option>
                        <option value="12">12</option>
                        <option value="18">18</option>
                        <option value="28" selected> 28</option>
                        <option value="exempted">exempted</option>
                        <option value="not applicable">not applicable</option>
                      </select>
                    </div>

                    <div [ngClass]="{'error': form.controls['gstRate'].errors && !form.controls['gstRate'].pristine}">
                      <div *ngIf="form.controls['gstRate'].errors && !form.controls['gstRate'].pristine" class="error-msg">
                        <small class="form-text text-muted danger" [hidden]="!form.controls['gstRate'].errors.required">Field is required.</small>
                        <small class="form-text text-muted danger" [hidden]="!form.controls['gstRate'].errors.patternInvalid">Invalid field.</small>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5   col-sm-5  offset-sm-4 offset-md-1">
                    <div class="form-group">
                      <label>HSN/SAC Code</label>
                      <span class="danger">*</span>
                      <input type="text" class="form-control" formControlName="hsnaCode">

                      <div [ngClass]="{'error': form.controls['hsnaCode'].errors && !form.controls['hsnaCode'].pristine}">
                        <div *ngIf="form.controls['hsnaCode'].errors && !form.controls['hsnaCode'].pristine" class="error-msg">
                          <small class="form-text text-muted danger" [hidden]="!form.controls['hsnaCode'].errors.required">Field is required.</small>
                          <small class="form-text text-muted danger" [hidden]="!form.controls['hsnaCode'].errors.patternInvalid">Invalid field.</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="text-center pl-3" style="text-align: center; width: 100%">
                    <h4>Opening Balance</h4>
                  </div>
                  <div class="row ">
                    <div class="col-lg-3  offset-lg-3 col-sm-2  offset-sm-1">
                      <div class="form-group">
                        <label>Qty</label>
                        <span class="danger">*</span>
                        <input type="text" class="form-control" formControlName="qty">

                        <div [ngClass]="{'error': form.controls['qty'].errors && !form.controls['qty'].pristine}">
                          <div *ngIf="form.controls['qty'].errors && !form.controls['qty'].pristine" class="error-msg">
                            <small class="form-text text-muted danger" [hidden]="!form.controls['qty'].errors.required">Field is required.</small>
                            <small class="form-text text-muted danger" [hidden]="!form.controls['qty'].errors.patternInvalid">Invalid field.</small>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-3  offset-lg-0 col-sm-2  offset-sm-1">
                      <div class="form-group">
                        <label>Rate</label>
                        <span class="danger">*</span>
                        <input type="text" class="form-control" formControlName="rate">

                        <div [ngClass]="{'error': form.controls['rate'].errors && !form.controls['rate'].pristine}">
                          <div *ngIf="form.controls['rate'].errors && !form.controls['rate'].pristine" class="error-msg">
                            <small class="form-text text-muted danger" [hidden]="!form.controls['rate'].errors.required">Field is required.</small>
                            <small class="form-text text-muted danger" [hidden]="!form.controls['rate'].errors.patternInvalid">Invalid field.</small>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-3  offset-lg-0 col-sm-2  offset-sm-1">
                      <div class="form-group">
                        <label>Value</label>
                        <span class="danger">*</span>
                        <input type="text" class="form-control" formControlName="val" value=" {{(form.get('qty').value)*(form.get('rate').value)}}">

                        <div [ngClass]="{'error': form.controls['val'].errors && !form.controls['val'].pristine}">
                          <div *ngIf="form.controls['val'].errors && !form.controls['val'].pristine" class="error-msg">
                            <small class="form-text text-muted danger" [hidden]="!form.controls['val'].errors.required">Field is required.</small>
                            <small class="form-text text-muted danger" [hidden]="!form.controls['val'].errors.patternInvalid">Invalid field.</small>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="btn-group">
                <button type="button" (click)="onSubmit(form.value)" class="btn btn-secondary" [disabled]="form.invalid">
                  submit</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
